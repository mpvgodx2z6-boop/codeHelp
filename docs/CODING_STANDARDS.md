# 代码规范与开发标准

## 代码注释规范

### 功能模块注释
每个功能模块使用统一的注释格式：

```typescript
/*********** 用户认证功能开始 ***********/
// 功能代码
/*********** 用户认证功能结束 ***********/
```

### 字段注释
所有字段和引用必须添加注释说明其用途：

```typescript
// 用户ID
const userId: string;

// 项目配置（JSON格式）
const config: string;
```

### 注释格式统一
- 单行注释使用 `//`
- 多行注释使用 `/* */`
- 功能块使用标准格式：`/*********** 功能名称开始/结束 ***********/`

## 文件管理规范

### 文件大小限制
- 每个代码文件不超过 500 行
- 每个 Markdown 文档不超过 500 行
- 超过限制时需拆分为多个文件

### 文档管理
- 所有功能文档存放在 `/docs` 目录
- 代码格式说明文档：`CODING_STANDARDS.md`
- 变更日志文档：`CHANGELOG.md`
- 功能说明文档：按模块划分

## 数据库表设计规范

### 标准字段
所有数据表必须包含以下标准字段（除非是特殊的中间表）：

```prisma
createdAt  DateTime @default(now())  // 创建时间
updatedAt  DateTime @updatedAt        // 更新时间
createdBy  String?                    // 创建人ID
updatedBy  String?                    // 更新人ID
```

### 索引规则
- 外键字段必须建立索引
- 常用查询字段建立索引
- 搜索字段根据实际情况建立索引

### 时间字段处理
- 后台页面使用时间组件展示
- 支持时间范围筛选
- 显示格式统一

## 前端安全规范

### 接口鉴权
- 所有接口必须进行权限验证
- 使用 Token 进行身份认证
- Token 过期自动刷新机制

### 安全性
- 输入数据进行校验和过滤
- 防止 XSS 攻击
- 防止 CSRF 攻击
- 敏感数据加密传输

## Git 提交规范

### 提交前检查
1. 在本地完成人工测试
2. 确保功能正常运行
3. 检查代码符合规范
4. 更新相关文档

### 提交信息格式
```
feat: 新增功能描述
fix: 修复问题描述
docs: 文档更新描述
refactor: 代码重构描述
test: 测试相关描述
```

## 公共提示词库

### 目的
记录每次人工测试的反馈，整理项目的公共提示词库，避免重复犯错。

### 位置
提示词库存放在 `/docs/PROMPT_LIBRARY.md`

### 内容
- 常见问题及解决方案
- 最佳实践总结
- 需要注意的事项
- 历史错误记录

## 强化学习记忆

### 实施方式
1. 每次修改前查询 Git 仓库相关代码
2. 分析相关功能的字段、方法、架构
3. 整理精准的提示词
4. 不断优化提示词准确性

### 代码查询流程
修改功能时需要查询：
1. 相关的数据模型和字段
2. 相关的 API 接口和方法
3. 前后端架构设计
4. 已有的类似功能实现

---

**最后更新**: 2026-01-13
**版本**: v1.0.0
