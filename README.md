# 功能需求文档（FRD）— 管理界面优先版
## 写代码 AI 提示词整理工具（Prompt Organizer / Prompt Builder）

- 文档版本：v0.2
- 生成日期：2026-01-13
- 当前用户：mpvgodx2z6-boop
- 目标：解决与大模型写代码沟通中“提示词不完善/上下文漏项/边界与限定缺失/多项目效率低”的问题，通过**管理界面 + 结构化资产沉淀**提升复用与交付效率。

---

## 1. 形态调整（最新结论）
### 1.1 首期形态
**首期形态：优先做管理界面（Web 管理台）**  
原因：用户是外包公司，项目多、规范多、复用需求强，需要把“项目约束/模块划分/提示词资产”长期沉淀、可编辑、可搜索、可复用。

> CLI/IDE 插件可作为后续“执行端”，但本版本优先“管理与资产沉淀”。

### 1.2 一级模块（必须）
1. **项目管理**
2. **公共提示词管理**
3. **微服务模块管理**

---

## 2. 总体概念模型（对象关系）
### 2.1 核心对象
- **项目（Project）**：一个客户/一个交付项目的总集合
- **微服务模块（Microservice Module）**：项目下的一个微项目/子系统（可独立开发、部署、维护）
- **公共提示词（Common Prompts）**：跨项目/跨微服务可复用的提示词资产（模板/片段/最佳实践）

### 2.2 关系
- 一个 **项目** 包含多个 **微服务模块**
- 每个 **微服务模块** 本质上是一个“微项目”，应当具备“项目管理”的全部字段与能力（见 3.1）
- **公共提示词** 可以被项目/微服务引用（引用关系可选做）

---

## 3. 一级模块需求

## 3.1 项目管理（Project Management）
### 3.1.1 功能目标
把“某个项目的技术架构、约束边界、不可犯错误、模块构成、说明文档”等信息结构化沉淀，形成大模型生成提示词时的**强约束上下文**。

### 3.1.2 列表页（Project List）
- 支持项目列表展示
- 支持搜索/筛选（最少）：
  - 项目名称
  - 项目类别
  - 状态（进行中/维护中/已交付/归档 等）
- 支持新增/编辑/删除（删除建议软删除）

### 3.1.3 项目详情页（Project Detail）
每个项目必须包含以下字段（你要求的内容全部落表）：

1. **项目类别**
   - 例如：电商、CRM、OA、内容平台、数据平台、APP 后台等
   - 用于后续：模板化/复用提示词与规范

2. **本项目技术架构**
   - 可结构化 + 富文本并存（建议两种字段）：
     - 结构化：语言/框架/数据库/消息队列/缓存/网关/鉴权/部署方式/CI 等
     - 富文本：架构说明、拓扑图链接、关键约定

3. **本项目不可犯的错（强约束清单）**
   - 列表形式（必须支持多条）：
     - 禁止事项：如“禁止引入新依赖”“禁止改接口返回字段名”“禁止直接改线上配置”等
     - 安全事项：如“日志必须脱敏”“不能输出明文 token”等
     - 性能事项：如“列表必须分页”“禁止全表扫描”等
   - 每条可附：原因、示例、严重级别（可选）

4. **本项目模块包含哪些（模块目录/功能模块）**
   - 支持记录模块清单（例如：用户、订单、权限、报表、审批）
   - 用于：提示词生成时自动提醒“可能影响模块”

5. **项目说明**
   - 富文本：项目背景、用户角色、关键业务流程、常见坑、上线注意事项等

6. **微服务模块关联**
   - 项目下微服务模块列表
   - 支持从项目详情页新增/挂载/跳转微服务模块详情

### 3.1.4 权限与协作（首期可简化）
- 至少支持：创建人/最后更新人/更新时间字段
- 后续可扩展：团队成员、角色权限（本 FRD 不强制）

---

## 3.2 公共提示词管理（Common Prompt Management）
### 3.2.1 功能目标
沉淀跨项目复用的提示词资产（模板、片段、规范性提示、验收清单等），并支持持续迭代。

### 3.2.2 列表页（必做）
- 列表展示：标题、类型、适用范围、标签、更新时间
- 支持搜索/筛选：
  - 标题关键字
  - 标签
  - 类型（模板/片段/检查清单/反例约束等）

### 3.2.3 新增/编辑（必做）
每条公共提示词建议字段：
- 标题（必填）
- 内容（必填，支持 Markdown）
- 类型（必填）：
  - 任务模板（Task Template）
  - 约束模板（Constraints）
  - 验收模板（Verification）
  - 安全脱敏模板（Security）
  - 代码改动模板（Patch/Refactor Guidance）
- 标签（可选）
- 版本/变更记录（首期可选，后续建议做）

### 3.2.4 生命周期
- 必须支持不断新增、修改
- 删除策略建议：软删除（避免资产误删）

---

## 3.3 微服务模块管理（Microservice Module Management）
### 3.3.1 功能目标
把每个微服务当成“微项目”管理，拥有与“项目管理”同等的字段与约束；并能被项目聚合管理。

### 3.3.2 列表页（必做）
- 微服务模块列表
- 支持筛选：
  - 所属项目
  - 微服务名称
  - 类别/技术栈/状态（可选）

### 3.3.3 微服务模块详情（核心要求：包含项目管理的所有功能）
每个微服务模块必须包含：
- **项目类别**（可继承项目类别或单独设置）
- **本微服务技术架构**（语言/框架/DB/依赖/部署等）
- **本微服务不可犯的错**
- **本微服务模块包含哪些**
- **微服务说明**
- （可选）仓库地址/部署信息/接口文档地址

并且：
- 微服务模块可以独立新增、删除、修改
- 微服务模块可以被挂载到某个项目之下（一个微服务通常属于一个项目；若未来需要复用，可支持多项目引用，但首期不强制）

---

## 4. 提示词生成（管理界面中的“资产如何被用起来”——建议补充模块）
> 你本次要求只改“首期形态与一级模块”，但为了让管理台有实际产出，这里给出一个“建议必备”的能力：生成提示词。

### 4.1 建议新增二级能力：Prompt 组装器（可选但强烈建议）
在项目或微服务详情页提供：
- “生成提示词”按钮
- 可选择引用哪些公共提示词（多选）
- 输出一份组合后的提示词（可复制）

输出可包含：
- 项目/微服务的架构信息
- 不可犯的错（强约束）
- 模块清单（提醒影响面）
- 选中的公共提示词模板（任务模板/验收模板等）

> 若你确认需要，我可以把“生成提示词页面”的字段与交互也补成完整 FRD。

---

## 5. 数据模型建议（便于落库）
### 5.1 Project（项目）
- id
- name
- category
- architecture_json（结构化）
- architecture_md（富文本）
- forbidden_mistakes[]（列表）
- modules[]（列表或 json）
- description_md
- status
- created_at / updated_at / created_by / updated_by

### 5.2 MicroserviceModule（微服务模块）
- id
- project_id（外键）
- name
- category
- architecture_json / architecture_md
- forbidden_mistakes[]
- modules[]
- description_md
- repo_url（可选）
- docs_url（可选）
- status
- created_at / updated_at / created_by / updated_by

### 5.3 CommonPrompt（公共提示词）
- id
- title
- type
- tags[]
- content_md
- is_deleted（软删除）
- created_at / updated_at / created_by / updated_by

---

## 6. 首期里程碑（建议）
- M1：三大一级模块 CRUD（项目/公共提示词/微服务模块）
- M2：项目详情页包含“关联微服务模块”
- M3（建议）：提示词组装器（项目/微服务一键生成可复制 Prompt）

---

## 7. 验收标准（首期）
1. 管理界面可用：项目管理、公共提示词管理、微服务模块管理三个一级入口完整可访问
2. 三类数据均支持：新增、编辑、删除（软删可选）、列表查询
3. 项目详情页能管理“多个微服务模块”
4. 微服务模块详情具备“项目管理的所有字段与能力”
5. 公共提示词支持持续新增/修改，并可在列表中检索

---
